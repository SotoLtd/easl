!function(n){"use strict";var e=function(){0!==n(".sidebars-column-2").length?this.widget_wrap=n(".sidebars-column-2"):this.widget_wrap=n(".sidebars-column-1"),this.widget_area=n("#widgets-right"),this.parent_area=n(".widget-liquid-right"),this.widget_template=n("#wpex-add-widget-template"),this.nonce=wpexWidgetAreasLocalize.nonce,this.add_form_html(),this.add_del_button(),this.bind_events()};e.prototype={add_form_html:function(){this.widget_wrap.append(this.widget_template.html()),this.widget_name=this.widget_wrap.find('input[name="wpex-add-widget-input"]')},add_del_button:function(){var t=0;this.widget_area.find(".sidebar-wpex-custom .widgets-sortables").each(function(){if(t>=wpexWidgetAreasLocalize.count){var e=n(this).attr("id");n(this).append('<div class="wpex-widget-area-footer"><div class="wpex-widget-area-id">ID: <input value="'+e+'" type="text" readonly onclick="this.select()" /></div><div class="wpex-widget-area-buttons"><a href="#" class="wpex-widget-area-delete button-primary">'+wpexWidgetAreasLocalize.delete+'</a><a href="#" class="wpex-widget-area-delete-cancel button-secondary">'+wpexWidgetAreasLocalize.cancel+'</a><a href="#" class="wpex-widget-area-delete-confirm button-primary">'+wpexWidgetAreasLocalize.confirm+"</a></div></div>")}t++})},bind_events:function(){this.parent_area.on("click","a.wpex-widget-area-delete",function(e){e.preventDefault(),n(this).hide(),n(this).next("a.wpex-widget-area-delete-cancel").show().next("a.wpex-widget-area-delete-confirm").show()}),this.parent_area.on("click","a.wpex-widget-area-delete-cancel",function(e){e.preventDefault(),n(this).hide(),n(this).prev("a.wpex-widget-area-delete").show(),n(this).next("a.wpex-widget-area-delete-confirm").hide()}),this.parent_area.on("click","a.wpex-widget-area-delete-confirm",n.proxy(this.delete_widget_area,this)),n("#addWidgetAreaForm").submit(function(){n.proxy(this.add_widget_area,this)})},add_widget_area:function(e){return e.preventDefault(),!1},delete_widget_area:function(e){var t=n(e.currentTarget).parents(".widgets-holder-wrap:eq(0)"),a=t.find(".sidebar-name h2"),i=a.find(".spinner"),d=n.trim(a.text());t.addClass("closed"),i.css("display","inline-block"),n.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpex_delete_widget_area",name:d,nonce:this.nonce},success:function(e){"widget_area-deleted"==e.trim()&&t.slideUp(200).remove()}})}},n(function(){new e})}(jQuery);